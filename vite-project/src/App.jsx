import { useEffect, useState } from 'react';
import './App.css';
import axios from 'axios'
const DataChildren = ({ name, id, onSave }) => {
    const [d1, set1] = useState('');
    const [d2, set2] = useState('');
    const [d3, set3] = useState('');
    const [d4, set4] = useState('');
    const [d5, set5] = useState('');
    const timeOptions = ['09:00', '10:30', '11:20', '12:20', '13:20', '14:20', '15:10'];

    useEffect(() => {
        const savedData = JSON.parse(localStorage.getItem(`data-${id}`));
        if (savedData && Array.isArray(savedData)) {
            set1(savedData[1] || '');
            set2(savedData[2] || '');
            set3(savedData[3] || '');
            set4(savedData[4] || '');
            set5(savedData[5] || '');
        }
    }, [id]);

    useEffect(() => {
        const data = [id, d1, d2, d3, d4, d5];
        onSave({ name, data });
        localStorage.setItem(`data-${id}`, JSON.stringify(data));
    }, [d1, d2, d3, d4, d5, id, name]);


    return (
        <div>
            
            <div style={{ display: 'flex' }}>
            <div style={{width:'500px'}}>{name}</div>
            <div >
                {[d1, d2, d3, d4, d5].map((value, index) => (
                    <select
                        key={index}
                        className='styled-select'
                        value={value}
                        onChange={(e) => {
                            index === 0 ? set1(e.target.value) :
                            index === 1 ? set2(e.target.value) :
                            index === 2 ? set3(e.target.value) :
                            index === 3 ? set4(e.target.value) :
                            set5(e.target.value);
                        }}
                    >
                        <option value="" disabled>Select time</option>
                        {timeOptions.map(time => (
                            <option key={time} value={time}>{time}</option>
                        ))}
                    </select>
                ))}
                </div>
            </div>
        </div>
    );
};

function App() {
    const classes = ['11Б', '11А', '11Е', '11Т', '11И', '11Э','11Г','11С'];
    const [className, setClassName] = useState('');
    const data = [{'className': '11Б', 'students': [{'birthDate': null, 'fullName': 'Булыгин Егор', 'id': 277, 'numberPhone': '89265851444'}, {'birthDate': null, 'fullName': 'Булыгин Никита', 'id': 278, 'numberPhone': '89263318555'}, {'birthDate': null, 'fullName': 'Вавилова Лада', 'id': 279, 'numberPhone': '89775430113'}, {'birthDate': null, 'fullName': 'Гетц Кай Алекс', 'id': 280, 'numberPhone': '89259459181'}, {'birthDate': null, 'fullName': 'Дроздовская Александра', 'id': 281, 'numberPhone': '89360000427'}, {'birthDate': null, 'fullName': 'Ильенко Илья', 'id': 282, 'numberPhone': '89265287300'}, {'birthDate': null, 'fullName': 'Ильин Максим', 'id': 283, 'numberPhone': '89166253939'}, {'birthDate': null, 'fullName': 'Каравайный Михаил', 'id': 284, 'numberPhone': '89153205114'}, {'birthDate': null, 'fullName': 'Карпов Иван', 'id': 285, 'numberPhone': '89099481166'}, {'birthDate': null, 'fullName': 'Константинова Валерия', 'id': 286, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Ломонос Анна', 'id': 287, 'numberPhone': '89251424708'}, {'birthDate': null, 'fullName': 'Макарова Софья', 'id': 288, 'numberPhone': '89255124605'}, {'birthDate': null, 'fullName': 'Масюков Егор', 'id': 289, 'numberPhone': '89689904275'}, {'birthDate': null, 'fullName': 'Махнутин Савелий', 'id': 290, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Молдиков Андрей', 'id': 291, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Нагорный Константин', 'id': 292, 'numberPhone': '89859044423'}, {'birthDate': null, 'fullName': 'Петренко Милан', 'id': 293, 'numberPhone': '89264233078'}, {'birthDate': null, 'fullName': 'Савенков Егор', 'id': 294, 'numberPhone': '89197627594'}, {'birthDate': null, 'fullName': 'Се Семен', 'id': 295, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Таланова Ника', 'id': 296, 'numberPhone': '89162955722'}, {'birthDate': null, 'fullName': 'Филин Матвей', 'id': 297, 'numberPhone': '89259167053'}, {'birthDate': null, 'fullName': 'Филиппов Степан', 'id': 298, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Чекмасов Кирилл', 'id': 299, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Черныш Майя', 'id': 300, 'numberPhone': '89154566550'}, {'birthDate': null, 'fullName': 'Шугаева Алина', 'id': 301, 'numberPhone': '89017200775'}, {'birthDate': null, 'fullName': 'Шугаева Алиса', 'id': 302, 'numberPhone': '89773688368'}, {'birthDate': null, 'fullName': 'Тучинская Кристина', 'id': 2092, 'numberPhone': '89032485618'}]}, {'className': '11Э', 'students': [{'birthDate': null, 'fullName': 'Агафонцев Александр', 'id': 641, 'numberPhone': '89266392264'}, {'birthDate': null, 'fullName': 'Амирханова Дарья', 'id': 642, 'numberPhone': '89686483014'}, {'birthDate': null, 'fullName': 'Воронина Ксения', 'id': 643, 'numberPhone': '89654068243'}, {'birthDate': null, 'fullName': 'Воронов Ярослав', 'id': 644, 'numberPhone': '89057456398'}, {'birthDate': null, 'fullName': 'Григорьян Марианна', 'id': 645, 'numberPhone': '89035335571'}, {'birthDate': null, 'fullName': 'Девяткина Екатерина', 'id': 646, 'numberPhone': '89161666366'}, {'birthDate': null, 'fullName': 'Закусилов Глеб', 'id': 647, 'numberPhone': '89645286958'}, {'birthDate': null, 'fullName': 'Ильин Руслан', 'id': 648, 'numberPhone': '89851434833'}, {'birthDate': null, 'fullName': 'Карпов Михаил', 'id': 649, 'numberPhone': '89775119163'}, {'birthDate': null, 'fullName': 'Кириллов Владислав', 'id': 650, 'numberPhone': '89660244355'}, {'birthDate': null, 'fullName': 'Колодко Владимир', 'id': 651, 'numberPhone': '89104405015'}, {'birthDate': null, 'fullName': 'Коровайная Елизавета', 'id': 652, 'numberPhone': '89269005174'}, {'birthDate': null, 'fullName': 'Лошкарева Арина', 'id': 653, 'numberPhone': '89295605476'}, {'birthDate': null, 'fullName': 'Мишина Виктория', 'id': 654, 'numberPhone': '89858854876'}, {'birthDate': null, 'fullName': 'Нестеров Тимур', 'id': 655, 'numberPhone': '89687012559'}, {'birthDate': null, 'fullName': 'Одинцов Дмитрий', 'id': 656, 'numberPhone': '89036184725'}, {'birthDate': null, 'fullName': 'Острецова Алиса', 'id': 657, 'numberPhone': '89261288201'}, {'birthDate': null, 'fullName': 'Петрова Илона', 'id': 658, 'numberPhone': '89161994474'}, {'birthDate': null, 'fullName': 'Пинкальский Андрей', 'id': 659, 'numberPhone': '89268533884'}, {'birthDate': null, 'fullName': 'Попов Александр', 'id': 660, 'numberPhone': '89857407696'}, {'birthDate': null, 'fullName': 'Размахаева Мария', 'id': 661, 'numberPhone': '89859381368'}, {'birthDate': null, 'fullName': 'Рогов Иван', 'id': 662, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Соболев Серафим', 'id': 663, 'numberPhone': '89167594774'}, {'birthDate': null, 'fullName': 'Тихонов Артём', 'id': 664, 'numberPhone': '89671200903'}, {'birthDate': null, 'fullName': 'Топоров Глеб', 'id': 665, 'numberPhone': '89267562712'}, {'birthDate': null, 'fullName': 'Туктарова Серафима', 'id': 666, 'numberPhone': '89299522490'}, {'birthDate': null, 'fullName': 'Тхагапсоев Артём', 'id': 667, 'numberPhone': '89859938021'}, {'birthDate': null, 'fullName': 'Фолимонова Варвара', 'id': 668, 'numberPhone': '89776308724'}, {'birthDate': null, 'fullName': 'Фролов Арсений', 'id': 669, 'numberPhone': '89267574710'}, {'birthDate': null, 'fullName': 'Хажаева Алина', 'id': 670, 'numberPhone': '89104803614'}, {'birthDate': null, 'fullName': 'Шашков Анатолий', 'id': 671, 'numberPhone': '89037117557'}]}, {'className': '11Е', 'students': [{'birthDate': null, 'fullName': 'Балачихин Ярослав', 'id': 952, 'numberPhone': '89992777175'}, {'birthDate': null, 'fullName': 'Барбашова Полина', 'id': 953, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Конеева Александра', 'id': 954, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Косиненко Маргарита', 'id': 955, 'numberPhone': '89250605866'}, {'birthDate': null, 'fullName': 'Косова Жанна', 'id': 956, 'numberPhone': '89264909096'}, {'birthDate': null, 'fullName': 'Лабзо Елизавета', 'id': 957, 'numberPhone': '89095534414'}, {'birthDate': null, 'fullName': 'Лиджиева Эвелина', 'id': 958, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Лобанова Мария', 'id': 959, 'numberPhone': '89266603544'}, {'birthDate': null, 'fullName': 'Макнасси Мохаммед Кэрим', 'id': 960, 'numberPhone': '89067537521'}, {'birthDate': null, 'fullName': 'Новоселова Александра', 'id': 961, 'numberPhone': '89636094271'}, {'birthDate': null, 'fullName': 'Орлов Сергей', 'id': 962, 'numberPhone': '89260890544'}, {'birthDate': null, 'fullName': 'Помелов Богдан', 'id': 963, 'numberPhone': '89998509179'}, {'birthDate': null, 'fullName': 'Расулова Зарина', 'id': 964, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Сидорова Варвара', 'id': 965, 'numberPhone': '89055910650'}, {'birthDate': null, 'fullName': 'Чащина София', 'id': 966, 'numberPhone': '89260864488'}, {'birthDate': null, 'fullName': 'Чубарыкина Дарья', 'id': 967, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Яковлев Роман', 'id': 968, 'numberPhone': '89265421048'}]}, {'className': '11Т', 'students': [{'birthDate': null, 'fullName': 'Батура Ярослав', 'id': 2072, 'numberPhone': '89777179270'}, {'birthDate': null, 'fullName': 'Брауде Антон', 'id': 2073, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Дроздов Святослав', 'id': 2074, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Зайцев Богдан', 'id': 2075, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Захурдаева Полина', 'id': 2076, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Кирпинская Мария', 'id': 2077, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Кондрашкин Алексей', 'id': 2078, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Конкин Роман', 'id': 2079, 'numberPhone': '89152287197'}, {'birthDate': null, 'fullName': 'Константинов Макар', 'id': 2080, 'numberPhone': '89654286396'}, {'birthDate': null, 'fullName': 'Купцова Ульяна', 'id': 2081, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Миновщиков Николай', 'id': 2082, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Молев Тимофей', 'id': 2083, 'numberPhone': '89150218772'}, {'birthDate': null, 'fullName': 'Ольчедаевский Александр', 'id': 2084, 'numberPhone': '89691839000'}, {'birthDate': null, 'fullName': 'Острейкова Софья', 'id': 2085, 'numberPhone': '89253310858'}, {'birthDate': null, 'fullName': 'Панасенко Полина', 'id': 2086, 'numberPhone': '89160806424'}, {'birthDate': null, 'fullName': 'Савостин Роберт', 'id': 2087, 'numberPhone': '89856192494'}, {'birthDate': null, 'fullName': 'Соколов Александр', 'id': 2088, 'numberPhone': '89252328845'}, {'birthDate': null, 'fullName': 'Стасюк София', 'id': 2089, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Степанов Фёдор', 'id': 2090, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Толстой Николай', 'id': 2091, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Фоменко Александр', 'id': 2093, 'numberPhone': '89164823266'}, {'birthDate': null, 'fullName': 'Чайка Олеся', 'id': 2094, 'numberPhone': '89257506000'}, {'birthDate': null, 'fullName': 'Швецов Тимофей', 'id': 2095, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Шурко Михаил', 'id': 2096, 'numberPhone': '89030008998'}]}, {'className': '10Г-11Г', 'students': [{'birthDate': null, 'fullName': 'Алексеева Дарья', 'id': 2223, 'numberPhone': '89777105276'}, {'birthDate': null, 'fullName': 'Амирова Анжела', 'id': 2224, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Баженова Александра', 'id': 2225, 'numberPhone': '89295678481'}, {'birthDate': null, 'fullName': 'Бакун Ольга', 'id': 2226, 'numberPhone': '89998180618'}, {'birthDate': null, 'fullName': 'Большаков Александр', 'id': 2227, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Газиева Рулана', 'id': 2228, 'numberPhone': '89388994077'}, {'birthDate': null, 'fullName': 'Душкина Алиса', 'id': 2229, 'numberPhone': '89150328616'}, {'birthDate': null, 'fullName': 'Замятина Юлия', 'id': 2230, 'numberPhone': '89645722302'}, {'birthDate': null, 'fullName': 'Ивановский Михаил', 'id': 2231, 'numberPhone': '89851873302'}, {'birthDate': null, 'fullName': 'Казначеева Ариана', 'id': 2232, 'numberPhone': '89295539616'}, {'birthDate': null, 'fullName': 'Кандейкина Полина', 'id': 2233, 'numberPhone': '89689673613'}, {'birthDate': null, 'fullName': 'Клопнёва Ксения', 'id': 2234, 'numberPhone': '89361112388'}, {'birthDate': null, 'fullName': 'Конрат Кристина', 'id': 2235, 'numberPhone': '89772692069'}, {'birthDate': null, 'fullName': 'Коптилов Тимофей', 'id': 2236, 'numberPhone': '89055712255'}, {'birthDate': null, 'fullName': 'Кострикова Виктория', 'id': 2237, 'numberPhone': '89266652959'}, {'birthDate': null, 'fullName': 'Овсянкина Вероника', 'id': 2238, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Павловский Федор', 'id': 2240, 'numberPhone': '89260206222'}, {'birthDate': null, 'fullName': 'Прамзин Роман', 'id': 2241, 'numberPhone': '89031660007'}, {'birthDate': null, 'fullName': 'Сендерихина Лидия', 'id': 2242, 'numberPhone': '89055146128'}, {'birthDate': null, 'fullName': 'Таранюк Ева', 'id': 2243, 'numberPhone': '89259055379'}, {'birthDate': null, 'fullName': 'Трифонов Александр', 'id': 2244, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Царь Анастасия', 'id': 2245, 'numberPhone': '89153579097'}, {'birthDate': null, 'fullName': 'Чувашина Ева', 'id': 2246, 'numberPhone': '89197236302'}, {'birthDate': null, 'fullName': 'Шашкова Анастасия', 'id': 2247, 'numberPhone': '89787124358'}, {'birthDate': null, 'fullName': 'Шмидт Влада', 'id': 2248, 'numberPhone': '89856961695'}, {'birthDate': null, 'fullName': 'Балакова Анна', 'id': 3660, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Бубон Софи', 'id': 3661, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Гольтина Анфиса', 'id': 3662, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Комолов Александр', 'id': 3663, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Кузенкова Анна', 'id': 3664, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Набиева Елизавета', 'id': 3665, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Нестерова Варвара', 'id': 3666, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Ставицкая Елизавета', 'id': 3667, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Степанова Виктория', 'id': 3668, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Страх Вероника', 'id': 3669, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Чеботарев Иван', 'id': 3670, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Брагина Полина', 'id': 3904, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Морозова Арина', 'id': 3905, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Железняк Дарья', 'id': 3906, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Соколова Мария', 'id': 3907, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Кузьмина Мария', 'id': 3908, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Кудрявцева Анна', 'id': 3909, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Лужкова Ангелина', 'id': 3910, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Комолов Александр', 'id': 3911, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Шутова Елизавета', 'id': 3912, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Тонких Александра', 'id': 3913, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Волобуева Полина', 'id': 3914, 'numberPhone': null}, {'birthDate': null, 'fullName': 'Ахмедова Мария', 'id': 3915, 'numberPhone': null}]}, {'className': '11С', 'students': [{'birthDate': null, 'fullName': 'Агибалова Анастасия', 'id': 2283, 'numberPhone': '89164954115'}, {'birthDate': null, 'fullName': 'Акулина Екатерина', 'id': 2284, 'numberPhone': '89670625280'}, {'birthDate': null, 'fullName': 'Благов Вячеслав', 'id': 2285, 'numberPhone': '89253271303'}, {'birthDate': null, 'fullName': 'Гарно София', 'id': 2286, 'numberPhone': '89859956090'}, {'birthDate': null, 'fullName': 'Гурьянов Владислав', 'id': 2287, 'numberPhone': '89166212173'}, {'birthDate': null, 'fullName': 'Демух Марья', 'id': 2288, 'numberPhone': '89670744546'}, {'birthDate': null, 'fullName': 'Жабкова Надежда', 'id': 2289, 'numberPhone': '89160633469'}, {'birthDate': null, 'fullName': 'Зеленцова Софья', 'id': 2290, 'numberPhone': '89672606185'}, {'birthDate': null, 'fullName': 'Капустина Дарья', 'id': 2291, 'numberPhone': '89853175636'}, {'birthDate': null, 'fullName': 'Ким Александр', 'id': 2292, 'numberPhone': '89266316269'}, {'birthDate': null, 'fullName': 'Кокшарова Анастасия', 'id': 2293, 'numberPhone': '89162635519'}, {'birthDate': null, 'fullName': 'Король Ангелина', 'id': 2294, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Крохина Яна', 'id': 2295, 'numberPhone': '89166616705'}, {'birthDate': null, 'fullName': 'Куплинова Дарья', 'id': 2296, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Минхаирова Алия', 'id': 2297, 'numberPhone': '89162709700'}, {'birthDate': null, 'fullName': 'Моисеев Андрей', 'id': 2298, 'numberPhone': '89856464027'}, {'birthDate': null, 'fullName': 'Молинова Анна', 'id': 2299, 'numberPhone': '89850545088'}, {'birthDate': null, 'fullName': 'Мухаметов Назар', 'id': 2300, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Ремпель Кира', 'id': 2301, 'numberPhone': '89160610661'}, {'birthDate': null, 'fullName': 'Ровинская Вера', 'id': 2302, 'numberPhone': '89859747721'}, {'birthDate': null, 'fullName': 'Романова Анастасия', 'id': 2303, 'numberPhone': '89250742615'}, {'birthDate': null, 'fullName': 'Сондыкова Вероника', 'id': 2304, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Сондыков Василий', 'id': 2305, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Томашеева Софья', 'id': 2306, 'numberPhone': '89773949471'}, {'birthDate': null, 'fullName': 'Трещалина Анастасия', 'id': 2307, 'numberPhone': '89162736108'}, {'birthDate': null, 'fullName': 'Устимчук Марк', 'id': 2308, 'numberPhone': '89129529518'}, {'birthDate': null, 'fullName': 'Шишкина Виктория', 'id': 2309, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Штендер Максим', 'id': 2310, 'numberPhone': '89261577687'}]}, {'className': '11М', 'students': [{'birthDate': null, 'fullName': 'Алексеенко Вероника', 'id': 3183, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Аминова Мавлюда', 'id': 3184, 'numberPhone': '89031827888'}, {'birthDate': null, 'fullName': 'Андреева Настасья', 'id': 3185, 'numberPhone': '89853631024'}, {'birthDate': null, 'fullName': 'Аргунов Михаил', 'id': 3186, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Большакова Ксения', 'id': 3187, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Борец-Первак Андрей', 'id': 3188, 'numberPhone': '89154018968'}, {'birthDate': null, 'fullName': 'Григорьев Никита', 'id': 3189, 'numberPhone': '89853612047'}, {'birthDate': null, 'fullName': 'Дюбина Варвара', 'id': 3190, 'numberPhone': '89154129607'}, {'birthDate': null, 'fullName': 'Желтова Анастасия', 'id': 3191, 'numberPhone': '89169890126'}, {'birthDate': null, 'fullName': 'Карпенко Арина', 'id': 3192, 'numberPhone': '89173204244'}, {'birthDate': null, 'fullName': 'Ковалева Полина', 'id': 3193, 'numberPhone': '89067555090'}, {'birthDate': null, 'fullName': 'Коломоец Таисия', 'id': 3194, 'numberPhone': '89651283391'}, {'birthDate': null, 'fullName': 'Куряева Диана', 'id': 3195, 'numberPhone': '89645615184'}, {'birthDate': null, 'fullName': 'Магазинова Дарья', 'id': 3196, 'numberPhone': '89647749665'}, {'birthDate': null, 'fullName': 'Макарова Диана', 'id': 3197, 'numberPhone': '89266511038'}, {'birthDate': null, 'fullName': 'Мокряк Яна', 'id': 3198, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Насибуллина Милена', 'id': 3199, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Полозова Лилия', 'id': 3200, 'numberPhone': '89629660977'}, {'birthDate': null, 'fullName': 'Прищепная Ульяна', 'id': 3201, 'numberPhone': '89252213073'}, {'birthDate': null, 'fullName': 'Радюкин Николай', 'id': 3202, 'numberPhone': '89253368475'}, {'birthDate': null, 'fullName': 'Родина Эвелина', 'id': 3203, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Родионова Дарья', 'id': 3204, 'numberPhone': '89663840730'}, {'birthDate': null, 'fullName': 'Скворцова Софья', 'id': 3205, 'numberPhone': '89091527842'}, {'birthDate': null, 'fullName': 'Степанова Анна', 'id': 3206, 'numberPhone': '89779987896'}, {'birthDate': null, 'fullName': 'Степина Вероника', 'id': 3207, 'numberPhone': '89999087569'}, {'birthDate': null, 'fullName': 'Тарасова Анна', 'id': 3208, 'numberPhone': '89859753385'}, {'birthDate': null, 'fullName': 'Уралова Елизавета', 'id': 3209, 'numberPhone': '89263280224'}, {'birthDate': null, 'fullName': 'Федорченко Дарина', 'id': 3210, 'numberPhone': '89088635859'}, {'birthDate': null, 'fullName': 'Чепуркина Дарья', 'id': 3211, 'numberPhone': '89039795790'}, {'birthDate': null, 'fullName': 'Щетинщикова Виктория', 'id': 3212, 'numberPhone': '89854320340'}, {'birthDate': null, 'fullName': 'Яковенко Стефания', 'id': 3213, 'numberPhone': '89197245674'}]}, {'className': '11И', 'students': [{'birthDate': null, 'fullName': 'Алейников Дмитрий', 'id': 3408, 'numberPhone': '89852143919'}, {'birthDate': null, 'fullName': 'Арзамасцев Фёдор', 'id': 3409, 'numberPhone': '89257928987'}, {'birthDate': null, 'fullName': 'Астахов Илья', 'id': 3410, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Викулов Иван', 'id': 3411, 'numberPhone': '89653221491'}, {'birthDate': null, 'fullName': 'Дорошенко Иван', 'id': 3412, 'numberPhone': '89683258041'}, {'birthDate': null, 'fullName': 'Ефименко Тимофей', 'id': 3413, 'numberPhone': '89690219709'}, {'birthDate': null, 'fullName': 'Исламов Никита', 'id': 3414, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Исмаилов Тимур', 'id': 3415, 'numberPhone': '89091507987'}, {'birthDate': null, 'fullName': 'Казарян Эдгар', 'id': 3416, 'numberPhone': '89670507337'}, {'birthDate': null, 'fullName': 'Князев Сергей', 'id': 3417, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Кошев Константин', 'id': 3418, 'numberPhone': '89175002007'}, {'birthDate': null, 'fullName': 'Мешалкин Дмитрий', 'id': 3419, 'numberPhone': '89264067607'}, {'birthDate': null, 'fullName': 'Мухортов Денис', 'id': 3420, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Мысякина Яна', 'id': 3421, 'numberPhone': '89162190736'}, {'birthDate': null, 'fullName': 'Платонов Михаил', 'id': 3422, 'numberPhone': ''}, {'birthDate': null, 'fullName': 'Рыбкин Фёдор', 'id': 3423, 'numberPhone': '89853616577'}, {'birthDate': null, 'fullName': 'Рябинин Максим', 'id': 3424, 'numberPhone': '89776485300'}, {'birthDate': null, 'fullName': 'Свиридова Екатерина', 'id': 3425, 'numberPhone': '89164743675'}, {'birthDate': null, 'fullName': 'Сероус Макар', 'id': 3426, 'numberPhone': '89250530723'}, {'birthDate': null, 'fullName': 'Смирнов Егор', 'id': 3427, 'numberPhone': '89153237462'}, {'birthDate': null, 'fullName': 'Соловьев Георгий', 'id': 3428, 'numberPhone': '89272730311'}, {'birthDate': null, 'fullName': 'Тер-Степанов Георгий', 'id': 3429, 'numberPhone': '89166767026'}, {'birthDate': null, 'fullName': 'Тирмяев Павел', 'id': 3430, 'numberPhone': '89663135672'}, {'birthDate': null, 'fullName': 'Шаньгин Алексей', 'id': 3431, 'numberPhone': '89856665429'}]}];
    const [childrenData, setChildrenData] = useState([]);
    const [name, setName] = useState('')
    
    const handleChildSave = (childData) => {
        setChildrenData(prevData => {
            const existingIndex = prevData.findIndex(item => item.name === childData.name);
            if (existingIndex !== -1) {
                const updatedData = [...prevData];
                updatedData[existingIndex] = childData;
                return updatedData;
            } else {
                return [...prevData, childData];
            }
        });
    };
    useEffect(()=>{
      if (classes.includes(name)){
        setClassName(name)
      }
      else{
        setClassName('')
      }
    },[name])
    const saveAll = () => {
        axios.post('http://127.0.0.1:5000/submit', {className:className, childrenData:childrenData}).then(function (res){
          console.log(res)
          setChildrenData([])
          alert('Сохранено!')

        }).catch(function (error){
          console.log(error)
        });
        console.log('Сохраненные данные:', childrenData);

    };

    return (
        <>

            <label>Класс:</label>
            <select className='styled-select' value={className} onChange={(e) => setClassName(e.target.value)}>
                <option value="" disabled>Select class</option>
                {classes.map(cl => <option key={cl} value={cl}>{cl}</option>)}
            </select>            <ul>
                {data.filter(item => item.className === className)
                    .flatMap(item => item.students.map(student => (
                        <DataChildren key={student.id} name={student.fullName} id={student.id} onSave={handleChildSave} />
                    )))}
            </ul>
            <button onClick={saveAll}>Сохранить все</button>
        </>
    );
}

export default App;